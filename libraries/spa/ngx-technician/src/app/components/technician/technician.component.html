<div *ngIf="case != null" class="tech-wrap tech-detail">
    <div class="tech-blk">
        <h4 class="tech-sub-ttl">Customer Details</h4>
        <table>
            <tr>
                <td class="td-name">Full name</td>
                <td> : {{case.warranty.customer.name}}</td>
            </tr>
            <tr>
                <td class="td-name">Contact no</td>
                <td> : +{{case.warranty.customer.dialingCode}}-{{case.warranty.customer.telephone}}</td>
            </tr>
            <tr>
                <td class="td-name">Email</td>
                <td> : {{case.warranty.customer.email}}</td>
            </tr>
            <tr>
                <td class="td-name">Address</td>
                <td>: {{case.warranty.customer.homeAddress}}</td>
            </tr>
            <tr>
                <td class="td-name">Postal Code</td>
                <td>: {{case.warranty.customer.homePostalCode}} <a href="#">(Get Directions)</a></td>
            </tr>
        </table>
    </div>
    <div class="tech-blk">
        <h4 class="tech-sub-ttl">Case Details</h4>
        <table>
            <tr>
                <td class="td-name">Case no</td>
                <td> : {{case.number}}</td>
            </tr>
            <tr>
                <td class="td-name">Date Created</td>
                <td> : {{case.createdAt | date: "d MMM y"}} by {{case.warranty.customer.name}}</td>
            </tr>
            <tr>
                <td class="td-name">Brand</td>
                <td> : 
                    <ng-select class="ipt-select" (change)="selectBrand($event,case.warranty)" [items]="case.warranty.brands" 
                        bindLabel="name" placeholder="(*) Product Brand" [(ngModel)]="case.warranty.selectedBrand">
                    </ng-select>
                </td>
            </tr>
            <tr>
                <td class="td-name">Category</td>
                <td>: 
                    <ng-select class="ipt-select" (change)="selectCategory($event,case.warranty)" [items]="case.warranty.categories"
                        bindLabel="name" placeholder="(*) Product Category"
                        [(ngModel)]="case.warranty.selectedCategory">
                    </ng-select>
                </td>
            </tr>
            <tr>
                <td class="td-name">Model Name</td>
                <td>: 
                    <ng-select class="ipt-select" [items]="case.warranty.products"
                        bindLabel="name" placeholder="(*) Product Brand"
                        [(ngModel)]="case.warranty.product">
                    </ng-select>
                </td>
            </tr>
            <tr>
                <td class="td-name">Model Number</td>
                <td>: <input type="text" class="ipt" [value]="case.warranty.product ? case.warranty.product.modelNumber ? case.warranty.product.modelNumber : '' : ''"/></td>
            </tr>
            <tr>
                <td class="td-name">Serial Number</td>
                <td>: <input type="text" class="ipt" [value]="case.warranty.product ? case.warranty.product.productSerialNumber ? case.warranty.product.productSerialNumber : '' : ''"/></td>
            </tr>
            <tr>
                <td class="td-name">Date Closed</td>
                <td>: N.A</td>
            </tr>
            <tr>
                <td class="td-name">Technician</td>
                <td>: #Technician Name</td>
            </tr>
            <tr>
                <td class="td-name">Service Zone</td>
                <td>: {{case.serviceZone.name}}</td>
            </tr>
        </table>
    </div>
    <div class="tech-blk">
        <h4 class="tech-sub-ttl">Case Details</h4>
        <!-- <p>What ever they want to write about the case when the customer called in.</p> -->
        <!-- <input type="text" class="ipt full" placeholder="Add Case Detail" [value]="case.description"/> -->
        <div [innerHTML]="case.description"></div>
    </div>
    <div class="tech-blk">
        <h4 class="tech-sub-ttl">Service/Case Notes</h4>
        <div class="note-list">
            <div *ngFor="let note of case.serviceNotes" class="note-item">
                <div *ngIf="note == currentAppointmentNote">
                    <input type="text" class="ipt" [(ngModel)]="note.description"/>
                    <span (click)="updateNote()">Update</span>
                </div>
                <div *ngIf="note != currentAppointmentNote">
                    <p>{{note.description}}</p>
                </div>
                <p>
                    Technician Name | {{note.appointment.appointmentAt | date: "d MMMM y"}} | <span (click)="deleteNote(note)">Delete</span>
                </p>
            </div>
        </div>
        <div *ngIf="currentAppointmentNote == null">
            <input type="text" class="ipt full" placeholder="Add New Case Notes/Service Rendered" [(ngModel)]="noteDescription" (keyup.enter)="addNote()"/>
        </div>
    </div>
    <div class="tech-blk">
        <image-upload
        class="custome-upload"
        [url]="uploadUrl"
        [beforeUpload]="onBeforeUpload"
        (removed)="onRemoved($event)"
        (uploadFinished)="onUploadFinished($event, 1)"
        (uploadStateChanged)="onUploadStateChanged($event)"
        buttonCaption="UPLOAD SERVICE INVOICE IMAGE"></image-upload>
        <div class="text-center">
            <button class="btn btn-green btn-mark">Mark Completed</button>
            <button class="btn btn-primary">UPDATE INFO</button>
        </div>
    </div>
</div>
